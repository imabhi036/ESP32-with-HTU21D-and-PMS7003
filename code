#include  "Wire.h" 
void RequestMeas(int Address, int CommandCode)
{
 Wire.beginTransmission(Address);
 Wire.write(CommandCode); 
 Wire.endTransmission();
 return;
}
 
long ReadMeas(int Address)
{

 byte DataHIGH;
 byte DataLOW;

 
 long Data; 
 Wire.requestFrom(Address, 3);
 while(Wire.available()) 
 {
 DataHIGH = Wire.read();
 DataLOW = Wire.read(); 

 } 
 
 
 Data = DataHIGH; 
 Data = Data << 8; 
 Data = Data + DataLOW;
 
 return Data; 
}
 
void setup()
{
 Wire.begin(); 
 Serial.begin(9600); 
}
 
void loop()
{

 const int I2C_address = 0x40; 
 const int TempCode = 0xE3; 
 const int HumidCode = 0xE5; 
 
 long Temperature;
 long Humidity; 
 
 float TemperatureFL; 
 float HumidityFL; 
 
 delay(100); 
 
 while(true)
 {
 delay(10); 
 RequestMeas(I2C_address, TempCode); 
 Temperature = ReadMeas(I2C_address);
 TemperatureFL = -46.85 + 175.72*(Temperature/pow(2, 16)); 
 
 delay(10); 
 
 RequestMeas(I2C_address, HumidCode); 
 Humidity = ReadMeas(I2C_address); 
 HumidityFL = -6 + 125*(Humidity/pow(2, 16)); 
 
 Serial.print("Temperature:");
 Serial.print(TemperatureFL);
 Serial.print("\t");
 Serial.print("Humidity:");
 Serial.println(HumidityFL);
 }
 
 return;
}
